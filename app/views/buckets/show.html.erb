<div class="main">
  <div>
    <%= link_to "Back to #{@book}", book_path(@book), class: 'action' %>
    <%= link_to "Edit", edit_bucket_path(@bucket), class: 'action' %>
  </div>
  <%= headline("Project: #{@book}") %>
  <table class='w-full my-12 text-xl table-fixed'>
    <tr>
      <th>Start:</th>
      <td class='text-right'><%= dateness(@bucket.start_on, "%-d %B %Y") || "Not set" %></td>
      <th>Finish:</th>
      <td id='end-on' class='text-right' data-end-on="<%= dateness(@bucket.finish_on) || "" %>"><%= dateness(@bucket.finish_on, "%-d %B %Y") || "Not set" %></td>
    </tr>
    <tr>
      <th>Current:</th><td class='text-right' id='writing-wordcount'><%= number_with_delimiter(@bucket.wordcount) %></td>
      <th>Target:</th><td class='text-right' id='writing-target'><%= number_with_delimiter(@bucket.target) %></td>
    </tr>
    <tr> <th>Summary:</th><td> <%= (@bucket.summary.nil? or @bucket.summary.empty?) ? "..." : @bucket.summary %></td>
    </tr>
  </table>
  

  <div data-controller="tabs" data-tabs-active-tab="tab-active">
    <ul class="flex border-b list-reset">
      <%= tab_tag 'Heatmap' %>
      <%= tab_tag 'Todolists' %>
      <%= tab_tag 'Writing Entries' %>
    </ul>
    <%= tab_panel do %>
      <%= render "dashboard/heatmap", entries: @bucket.writing_entries %>
    <% end %>
    <%= tab_panel do %>
      <%= render partial: 'todolists/index', locals: {todolists: @bucket.todolists, parent: @bucket} %>
    <% end %>
    <%= tab_panel do %>
      <%= render 'writing_entries/index' %>
    <% end %>
  </div>
</div>